package jmnet.moka.web.rcv;

import java.util.HashMap;
import java.util.Map;
import java.util.regex.Matcher;
import java.util.regex.Pattern;
import lombok.Getter;
import lombok.Setter;
import lombok.extern.slf4j.Slf4j;
import org.junit.Test;
import org.springframework.boot.test.context.SpringBootTest;

/**
 * <pre>
 *
 * Project : moka-springboot-parent
 * Package : jmnet.moka.web.rcv
 * ClassName : MokaRcvApplicationTest
 * Created : 2020-10-26 026 sapark
 * </pre>
 *
 * @author sapark
 * @since 2020-10-26 026 오후 2:40
 */


@Slf4j
public class MokaRcvTest {

//    @Test
//    public void patternFile() {
//        String testString = "aaaa" +
//                "<div class=\"ab_dynamic_chart\" data-chartImgUrl = \"https://pds.joins.com/news/component/htmlphoto_mmdata/202004/26/1c200b46-6c6d-4872-a50c-333858eaafb6.jpg\" data-datadchart='{\"chart\":{\"type\":\"line\",\"plotBorderWidth\":0,\"dataForLoading\":{\"theme\":\"softDark\",\"yGridLine\":true,\"xAxis_title_text\":\"\",\"yAxis_title_text\":\"\",\"yAxis_min\":\"\",\"yAxis_max\":\"\",\"xAxis_labels_format\":\"\",\"yAxis_labels_format\":\"%\",\"legend\":{\"legend_enabled\":false,\"legend_layout\":\"horizontal\",\"legend_align\":\"center\",\"legend_verticalAlign\":\"bottom\"},\"credits_enabled\":false,\"credits_url\":\"https://joongang.joins.com\",\"credits_text\":\"joongang.joins.com\",\"zoomData\":{\"curMaxZoomMap\":null,\"curMinZoomMap\":null,\"curMaxZoomMapY\":null,\"curMinZoomMapY\":null}},\"backgroundColor\":{\"linearGradient\":{\"x1\":0,\"y1\":0,\"x2\":1,\"y2\":1},\"stops\":[[0,\"#2a2a2b\"],[1,\"#3e3e40\"]]},\"style\":{\"fontFamily\":\"&apos;Malgun Gothic&apos;, &apos;맑은고딕&apos;, dotum, Arial, AppleSDGothic\"},\"plotBorderColor\":\"#606063\"},\"title\":{\"text\":\"자동차보험 손해율 추이\",\"align\":\"center\",\"style\":{\"fontWeight\":\"bold\",\"color\":\"#E0E0E3\",\"textTransform\":\"uppercase\",\"fontSize\":\"20px\"}},\"subtitle\":{\"text\":\"자료 : 보험개발원, 보험통계포털\",\"align\":\"right\",\"style\":{\"fontWeight\":null,\"color\":\"#E0E0E3\",\"textTransform\":\"uppercase\"}},\"credits\":{\"enabled\":false,\"style\":{\"color\":\"#666\"}},\"xAxis\":{\"categories\":[\"2010년\",\"2011년\",\"2012년\",\"2013년\",\"2014년\",\"2015년\",\"2016년\",\"2017년\",\"2018년\",\"2019년\"],\"title\":{\"text\":\"Sample [x]Aixs title\",\"style\":{\"color\":\"#A0A0A3\"}},\"labels\":{\"format\":\"{value} \",\"style\":{\"color\":\"#E0E0E3\"}},\"gridLineColor\":\"#707073\",\"lineColor\":\"#707073\",\"minorGridLineColor\":\"#505053\",\"tickColor\":\"#707073\"},\"yAxis\":{\"title\":{\"text\":\"Sample [y]Axis Title\",\"style\":{\"color\":\"#A0A0A3\"}},\"gridLineWidth\":1,\"labels\":{\"format\":\"{value} %\",\"style\":{\"color\":\"#E0E0E3\"}},\"min\":null,\"max\":null,\"gridLineColor\":\"#707073\",\"lineColor\":\"#707073\",\"minorGridLineColor\":\"#505053\",\"tickColor\":\"#707073\",\"tickWidth\":1},\"legend\":{\"enabled\":false,\"layout\":\"horizontal\",\"align\":\"center\",\"verticalAlign\":\"bottom\",\"itemStyle\":{\"color\":\"#E0E0E3\"},\"itemHoverStyle\":{\"color\":\"#FFF\"},\"itemHiddenStyle\":{\"color\":\"#606063\"}},\"plotOptions\":{\"series\":{\"label\":{\"connectorAllowed\":false},\"dataLabels\":{\"color\":\"#B0B0B3\"},\"marker\":{\"lineColor\":\"#333\"}},\"boxplot\":{\"fillColor\":\"#505053\"},\"candlestick\":{\"lineColor\":\"white\"},\"errorbar\":{\"color\":\"white\"}},\"series\":[{\"name\":[\"손해율\"],\"data\":[80.4,82.3,83.9,87.7,88.4,87.8,83,80.8,85.9,91.4]}],\"responsive\":{\"rules\":[{\"condition\":{\"maxWidth\":500},\"chartOptions\":{\"legend\":{\"layout\":\"horizontal\",\"align\":\"center\",\"verticalAlign\":\"bottom\"}},\"_id\":\"highcharts-4pc2wbb-1532\"}]},\"colors\":[\"#2b908f\",\"#90ee7e\",\"#f45b5b\",\"#7798BF\",\"#aaeeee\",\"#ff0066\",\"#eeaaee\",\"#55BF3B\",\"#DF908D\",\"#9F64B5\",\"#aaeeee\"],\"tooltip\":{\"backgroundColor\":\"rgba(0, 0, 0, 0.85)\",\"style\":{\"color\":\"#F0F0F0\"}},\"labels\":{\"style\":{\"color\":\"#707073\"}},\"drilldown\":{\"activeAxisLabelStyle\":{\"color\":\"#F0F0F3\"},\"activeDataLabelStyle\":{\"color\":\"#F0F0F3\"}},\"navigation\":{\"buttonOptions\":{\"symbolStroke\":\"#DDDDDD\",\"theme\":{\"fill\":\"#505053\"}}},\"rangeSelector\":{\"buttonTheme\":{\"fill\":\"#505053\",\"stroke\":\"#000000\",\"style\":{\"color\":\"#CCC\"},\"states\":{\"hover\":{\"fill\":\"#707073\",\"stroke\":\"#000000\",\"style\":{\"color\":\"white\"}},\"select\":{\"fill\":\"#000003\",\"stroke\":\"#000000\",\"style\":{\"color\":\"white\"}}}},\"inputBoxBorderColor\":\"#505053\",\"inputStyle\":{\"backgroundColor\":\"#333\",\"color\":\"silver\"},\"labelStyle\":{\"color\":\"silver\"}},\"navigator\":{\"handles\":{\"backgroundColor\":\"#666\",\"borderColor\":\"#AAA\"},\"outlineColor\":\"#CCC\",\"maskFill\":\"rgba(255,255,255,0.1)\",\"series\":{\"color\":\"#7798BF\",\"lineColor\":\"#A6C7ED\"},\"xAxis\":{\"gridLineColor\":\"#505053\"}},\"scrollbar\":{\"barBackgroundColor\":\"#808083\",\"barBorderColor\":\"#808083\",\"buttonArrowColor\":\"#CCC\",\"buttonBackgroundColor\":\"#606063\",\"buttonBorderColor\":\"#606063\",\"rifleColor\":\"#FFF\",\"trackBackgroundColor\":\"#404043\",\"trackBorderColor\":\"#404043\"},\"legendBackgroundColor\":\"rgba(0, 0, 0, 0.5)\",\"background2\":\"#505053\",\"dataLabelsColor\":\"#B0B0B3\",\"textColor\":\"#C0C0C0\",\"contrastTextColor\":\"#F0F0F3\",\"maskColor\":\"rgba(255,255,255,0.3)\"}' >  <figure id=\"chart_container_5\">  </figure></div>" +
//                "bbb" +
//                "<div class=\"ab_dynamic_chart\" data-chartImgUrl = \"https://pds.joins.com/news/component/htmlphoto_mmdata/202004/26/Second.jpg\" data-datadchart='{\"chart\":{\"type\":\"line\",\"plotBorderWidth\":0,\"dataForLoading\":{\"theme\":\"softDark\",\"yGridLine\":true,\"xAxis_title_text\":\"\",\"yAxis_title_text\":\"\",\"yAxis_min\":\"\",\"yAxis_max\":\"\",\"xAxis_labels_format\":\"\",\"yAxis_labels_format\":\"%\",\"legend\":{\"legend_enabled\":false,\"legend_layout\":\"horizontal\",\"legend_align\":\"center\",\"legend_verticalAlign\":\"bottom\"},\"credits_enabled\":false,\"credits_url\":\"https://joongang.joins.com\",\"credits_text\":\"joongang.joins.com\",\"zoomData\":{\"curMaxZoomMap\":null,\"curMinZoomMap\":null,\"curMaxZoomMapY\":null,\"curMinZoomMapY\":null}},\"backgroundColor\":{\"linearGradient\":{\"x1\":0,\"y1\":0,\"x2\":1,\"y2\":1},\"stops\":[[0,\"#2a2a2b\"],[1,\"#3e3e40\"]]},\"style\":{\"fontFamily\":\"&apos;Malgun Gothic&apos;, &apos;맑은고딕&apos;, dotum, Arial, AppleSDGothic\"},\"plotBorderColor\":\"#606063\"},\"title\":{\"text\":\"자동차보험 손해율 추이\",\"align\":\"center\",\"style\":{\"fontWeight\":\"bold\",\"color\":\"#E0E0E3\",\"textTransform\":\"uppercase\",\"fontSize\":\"20px\"}},\"subtitle\":{\"text\":\"자료 : 보험개발원, 보험통계포털\",\"align\":\"right\",\"style\":{\"fontWeight\":null,\"color\":\"#E0E0E3\",\"textTransform\":\"uppercase\"}},\"credits\":{\"enabled\":false,\"style\":{\"color\":\"#666\"}},\"xAxis\":{\"categories\":[\"2010년\",\"2011년\",\"2012년\",\"2013년\",\"2014년\",\"2015년\",\"2016년\",\"2017년\",\"2018년\",\"2019년\"],\"title\":{\"text\":\"Sample [x]Aixs title\",\"style\":{\"color\":\"#A0A0A3\"}},\"labels\":{\"format\":\"{value} \",\"style\":{\"color\":\"#E0E0E3\"}},\"gridLineColor\":\"#707073\",\"lineColor\":\"#707073\",\"minorGridLineColor\":\"#505053\",\"tickColor\":\"#707073\"},\"yAxis\":{\"title\":{\"text\":\"Sample [y]Axis Title\",\"style\":{\"color\":\"#A0A0A3\"}},\"gridLineWidth\":1,\"labels\":{\"format\":\"{value} %\",\"style\":{\"color\":\"#E0E0E3\"}},\"min\":null,\"max\":null,\"gridLineColor\":\"#707073\",\"lineColor\":\"#707073\",\"minorGridLineColor\":\"#505053\",\"tickColor\":\"#707073\",\"tickWidth\":1},\"legend\":{\"enabled\":false,\"layout\":\"horizontal\",\"align\":\"center\",\"verticalAlign\":\"bottom\",\"itemStyle\":{\"color\":\"#E0E0E3\"},\"itemHoverStyle\":{\"color\":\"#FFF\"},\"itemHiddenStyle\":{\"color\":\"#606063\"}},\"plotOptions\":{\"series\":{\"label\":{\"connectorAllowed\":false},\"dataLabels\":{\"color\":\"#B0B0B3\"},\"marker\":{\"lineColor\":\"#333\"}},\"boxplot\":{\"fillColor\":\"#505053\"},\"candlestick\":{\"lineColor\":\"white\"},\"errorbar\":{\"color\":\"white\"}},\"series\":[{\"name\":[\"손해율\"],\"data\":[80.4,82.3,83.9,87.7,88.4,87.8,83,80.8,85.9,91.4]}],\"responsive\":{\"rules\":[{\"condition\":{\"maxWidth\":500},\"chartOptions\":{\"legend\":{\"layout\":\"horizontal\",\"align\":\"center\",\"verticalAlign\":\"bottom\"}},\"_id\":\"highcharts-4pc2wbb-1532\"}]},\"colors\":[\"#2b908f\",\"#90ee7e\",\"#f45b5b\",\"#7798BF\",\"#aaeeee\",\"#ff0066\",\"#eeaaee\",\"#55BF3B\",\"#DF908D\",\"#9F64B5\",\"#aaeeee\"],\"tooltip\":{\"backgroundColor\":\"rgba(0, 0, 0, 0.85)\",\"style\":{\"color\":\"#F0F0F0\"}},\"labels\":{\"style\":{\"color\":\"#707073\"}},\"drilldown\":{\"activeAxisLabelStyle\":{\"color\":\"#F0F0F3\"},\"activeDataLabelStyle\":{\"color\":\"#F0F0F3\"}},\"navigation\":{\"buttonOptions\":{\"symbolStroke\":\"#DDDDDD\",\"theme\":{\"fill\":\"#505053\"}}},\"rangeSelector\":{\"buttonTheme\":{\"fill\":\"#505053\",\"stroke\":\"#000000\",\"style\":{\"color\":\"#CCC\"},\"states\":{\"hover\":{\"fill\":\"#707073\",\"stroke\":\"#000000\",\"style\":{\"color\":\"white\"}},\"select\":{\"fill\":\"#000003\",\"stroke\":\"#000000\",\"style\":{\"color\":\"white\"}}}},\"inputBoxBorderColor\":\"#505053\",\"inputStyle\":{\"backgroundColor\":\"#333\",\"color\":\"silver\"},\"labelStyle\":{\"color\":\"silver\"}},\"navigator\":{\"handles\":{\"backgroundColor\":\"#666\",\"borderColor\":\"#AAA\"},\"outlineColor\":\"#CCC\",\"maskFill\":\"rgba(255,255,255,0.1)\",\"series\":{\"color\":\"#7798BF\",\"lineColor\":\"#A6C7ED\"},\"xAxis\":{\"gridLineColor\":\"#505053\"}},\"scrollbar\":{\"barBackgroundColor\":\"#808083\",\"barBorderColor\":\"#808083\",\"buttonArrowColor\":\"#CCC\",\"buttonBackgroundColor\":\"#606063\",\"buttonBorderColor\":\"#606063\",\"rifleColor\":\"#FFF\",\"trackBackgroundColor\":\"#404043\",\"trackBorderColor\":\"#404043\"},\"legendBackgroundColor\":\"rgba(0, 0, 0, 0.5)\",\"background2\":\"#505053\",\"dataLabelsColor\":\"#B0B0B3\",\"textColor\":\"#C0C0C0\",\"contrastTextColor\":\"#F0F0F3\",\"maskColor\":\"rgba(255,255,255,0.3)\"}' >  <figure id=\"chart_container_5\">  </figure></div>" +
//                "ccc";
//        String successString = "<img alt=\"\" src=\"https://pds.joins.com/news/component/htmlphoto_mmdata/202004/26/1c200b46-6c6d-4872-a50c-333858eaafb6.jpg\"/>";
//
//
//        String targetString = testString;
//
//        final String chartPattern = "(?i)<div\\s*?class\\s*?=\\s*?\"ab_dynamic_chart\"\\s*?data-chartImgUrl\\s*?=\\s*?['|\"](?<imgUrl>.*?)['|\"].*?</figure></div>";
//
//        targetString = testString.replaceAll(chartPattern, "<img alt=\"\" src=\"$1\"/>");
//
//        log.info(targetString);
//    }
}
