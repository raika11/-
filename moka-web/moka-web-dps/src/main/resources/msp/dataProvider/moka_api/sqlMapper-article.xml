<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="dps.article">

  <!-- article basic -->
  <select id="basic" parameterType="hashmap" resultType="map">
    select A.*, SOURCE_NAME, SOURCE_BASEURL, SOURCE_TYPE from TB_ARTICLE_BASIC A, TB_ARTICLE_SOURCE B
    where A.SOURCE_CODE = B.SOURCE_CODE AND A.TOTAL_ID=#{totalId}
  </select>
  <!-- article content -->
  <select id="content" parameterType="hashmap" resultType="map">
    select * FROM TB_ARTICLE_CONTENT
    where TOTAL_ID=#{totalId}
  </select>
  <!-- article reporter -->
  <select id="reporter" parameterType="hashmap" resultType="map">
    select B.* from TB_15RE_ARTICLE_REPORTER A, TB_15RE_REPORTER B
    where TOTAL_ID = #{totalId} AND A.REP_SEQ = B.REP_SEQ
    ORDER BY A.ORD_NO ASC
  </select>
  <!-- article mastercode -->
  <select id="mastercode" parameterType="hashmap" resultType="map">
    select B.*
    from TB_ARTICLE_CODELIST A, TB_MASTERCODE B
    where TOTAL_ID =#{totalId} AND A.MASTER_CODE = B.MASTER_CODE
    and A.SERVICE_FLAG='Y'
    order by ORD_NO
  </select>
  <!-- article servicemap -->
  <select id="servicemap" parameterType="hashmap" resultType="map">
    select B.*
    from TB_ARTICLE_CODELIST A, TB_SERVICE_MAP B
    where TOTAL_ID = #{totalId} AND A.MASTER_CODE = b.MASTER_CODE
    and A.SERVICE_CODE = B.SERVICE_CODE
    and A.SERVICE_FLAG='Y'
    order by ORD_NO
  </select>
  <!-- article keyword -->
  <select id="keyword" parameterType="hashmap" resultType="map">
  SELECT *
  FROM TB_ARTICLE_KEYWORD
  WHERE TOTAL_ID = #{totalId}
  </select>
  <!-- article clickcnt -->
  <select id="clickcnt" parameterType="hashmap" resultType="map">
  SELECT *
  FROM TB_15RE_ARTICLE_CLICKCNT
  WHERE TOTAL_ID = #{totalId}
  </select>
  <!-- article multi -->
  <select id="multi" parameterType="hashmap" resultType="map">
  select * from TB_15RE_ARTICLE_MULTI
where TOTAL_ID = #{totalId}
  </select>
  <!-- article source -->
  <select id="source" parameterType="hashmap" resultType="map">
    select * from TB_15RE_ARTICLE_MULTI
    where TOTAL_ID = #{totalId}
  </select>

  <resultMap id="map" type="hashmap"/>
  <!-- article list -->
  <select id="list" parameterType="map" resultType="map" resultMap="map,map"
    statementType="CALLABLE">
		 {call UPU_15RE_ARTICLE_LIST_SEL(
			#{pageIndex, mode=IN, jdbcType=INTEGER, javaType=java.lang.Integer},
			#{pageSize, mode=IN, jdbcType=INTEGER, javaType=java.lang.Integer},
			#{serviceCodeList, mode=IN, jdbcType=VARCHAR, javaType=string},
			#{masterCodeList, mode=IN, jdbcType=VARCHAR, javaType=string},
			#{keywordList, mode=IN, jdbcType=VARCHAR, javaType=string},
			#{usageType, mode=IN, jdbcType=VARCHAR, javaType=string},
			#{contentTypeList, mode=IN, jdbcType=VARCHAR, javaType=string},
			#{startSearchDate, mode=IN, jdbcType=VARCHAR, javaType=string},
			#{endSearchDate, mode=IN, jdbcType=VARCHAR, javaType=string},
			#{startTotalId, mode=IN, jdbcType=INTEGER, javaType=java.lang.Integer},
			#{exceptTotalIdList, mode=IN, jdbcType=VARCHAR, javaType=string},
			#{exceptMasterCodeList, mode=IN, jdbcType=VARCHAR, javaType=string},
			#{exceptSourceCodeList, mode=IN, jdbcType=VARCHAR, javaType=string},
			#{isExistThumbnail, mode=IN, jdbcType=VARCHAR, javaType=string},
			#{usedTotalCount, mode=IN, jdbcType=VARCHAR, javaType=string},
			#{totalCount, mode=OUT, jdbcType=INTEGER, javaType=java.lang.Integer}
		) }
  	</select>

  <!-- desking -->
  <select id="desking" parameterType="map" resultType="map" resultMap="map,map"
    statementType="CALLABLE">
		 {call USP_WMS_DESKING_LIST_SEL(
		  #{ids, mode=IN, jdbcType=VARCHAR, javaType=string},
			#{page, mode=IN, jdbcType=INTEGER, javaType=java.lang.Integer},
			#{count, mode=IN, jdbcType=INTEGER, javaType=java.lang.Integer},
			'Y',
			#{total, mode=OUT, jdbcType=INTEGER, javaType=java.lang.Integer}
		) }
  	</select>

  <!-- desking.work -->
  <select id="deskingWork" parameterType="map" resultType="map" resultMap="map,map"
    statementType="CALLABLE">
		 {call USP_WMS_DESKING_WORK_LIST_SEL(
		  #{ids, mode=IN, jdbcType=VARCHAR, javaType=string},
		  #{regId, mode=IN, jdbcType=VARCHAR, javaType=string},
			#{page, mode=IN, jdbcType=INTEGER, javaType=java.lang.Integer},
			#{count, mode=IN, jdbcType=INTEGER, javaType=java.lang.Integer},
			'Y',
			#{total, mode=OUT, jdbcType=INTEGER, javaType=java.lang.Integer}
		) }
  	</select>

</mapper>
