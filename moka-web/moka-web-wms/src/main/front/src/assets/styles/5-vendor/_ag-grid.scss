/* -------------------------------------------------------------------
 * ag-grid.scss defines structural styles and should be imported first
 * ------------------------------------------------------------------ */
@import 'ag-grid-community/src/styles/ag-grid';
@import 'ag-grid-community/src/styles/ag-theme-alpine/sass/ag-theme-alpine-mixin';

.ag-react-container {
    height: 100%;
    width: 100%;
}

.pre-cell {
    display: flex;
    align-items: center;
    white-space: pre !important;
}

.pre-wrap-cell {
    display: flex;
    align-items: center;
    white-space: pre-wrap !important;
}

.ag-dnd-ghost {
    z-index: 1051 !important; // bootstrap Modal 보다 높게 설정
}

.ag-header-no {
    .ag-header {
        display: none;
    }
}

.ag-layout-normal {
    min-height: 36px;
}

.selected-row {
    background-color: rgba(33, 150, 243, 0.3);
}

/* -------------------------------------------------------------------
 * ag-theme-moka-grid (include ag-theme-aplpine)
 * 기본 테이블 + appStack 테이블 스타일
 * ------------------------------------------------------------------ */
.ag-theme-moka-grid {
    @include ag-theme-alpine(
        (
            odd-row-background-color: #fff,
            row-height: 34px,
            header-height: 36px,
            font-family: $font-family-sans-serif,
            font-size: 13px,    // _ag-theme-alpine-mixin에서 +1하여 처리함
            header-column-separator: false,
            range-selection-border-color: transparent,
            row-hover-color: rgba(33, 150, 243, 0.1),
            alpine-active-color: rgba(33, 150, 243, 0.3),
            selected-row-background-color: rgba(33, 150, 243, 0.3),
        )
    );

    .ag-root-wrapper {
        border: none;

        .ag-root-wrapper-body {
            overflow: hidden;
            height: unset !important;
            min-height: unset !important;
        }

        .ag-body-viewport {
            @include custom-scroll;
            overflow-y: auto;
        }

        .ag-header {
            border-top: solid $table-border-width;
            border-bottom: solid (2 * $table-border-width);
            border-color: $table-border-color;
            background-color: $white;

            .ag-header-cell {
                padding-left: 6px;
                padding-right: 6px;
            }
        }

        .ag-header-cell-text {
            white-space: pre;
        }

        .ag-cell {
            padding-left: 5px;
            padding-right: 5px;
        }

        .user-select-text {
            cursor: text;
            user-select: text;
        }

        .ag-cell-center {
            text-align: center;
        }

        .ag-row {
            cursor: pointer;

            .ag-row-last {
                border-bottom-style: none;
            }

            &:nth-of-type(odd) {
                background-color: $table-accent-bg;
            }

            &:hover {
                background-color: var(--ag-row-hover-color, rgba(33, 150, 243, 0.1));
            }

            &.ag-row-selected {
                background-color: var(--ag-selected-row-background-color, rgba(33, 150, 243, 0.3));
            }

            // usedyn-n row
            &.usedyn-n {
                @include disabled-font;
            }

            // deskingyn-y row
            &.deskingyn-y {
                background-color: #fffcde;
            }
        }
    }

    &.ag-header-no {
        .ag-root-wrapper {
            border-top: solid $table-border-width;
            border-bottom: solid $table-border-width;
            border-color: $table-border-color;
        }
    }

    &:not(.article-list) .ag-checkbox-input-wrapper {
        border-radius: 50%;
        font-size: 18px;
        line-height: 17px;
        width: 17px;
        height: 17px;

        &::after {
            font-family: 'Font Awesome 5 Pro';
            content: '\f111';
        }

        &:focus-within, &:active {
            box-shadow: none;
        }

        &.ag-checked::after {
            content: '\f058';
            font-weight: 900;
        }
    }

    .ag-icon-grip {
        transform: rotate(90deg);
    }

    .ag-ltr .ag-row-drag, .ag-ltr .ag-selection-checkbox, .ag-ltr .ag-group-expanded, .ag-ltr .ag-group-contracted {
        margin-right: 0px;
    }

    .ag-cell-auto-height.ag-cell-wrap-text .ag-react-container {
        height: auto;
    }
}

/* -------------------------------------------------------------------
 * ag-theme-moka-dnd-grid (include ag-theme-aplpine)
 * drag drop style
 * ------------------------------------------------------------------ */
$desking-row-color: #f4f7f9;
$row-hover-color: darken($desking-row-color, 5);

.ag-theme-moka-dnd-grid {
    @include ag-theme-alpine(
        (
            odd-row-background-color: $desking-row-color,
            font-family: $font-family-sans-serif,
            font-size: 13px,    // _ag-theme-alpine-mixin에서 +1하여 처리함
            header-column-separator: false,
            row-hover-color: $row-hover-color,
            selected-row-background-color: #efefef,
            range-selection-border-color: transparent,
            border-color: $white
        )
    );

    .ag-root-wrapper {
        .ag-root-wrapper-body {
            overflow: hidden;
            height: unset !important;
            min-height: unset !important;
        }

        .ag-body-viewport {
            @include custom-scroll;
            overflow-y: auto;
        }

        .ag-row {
            border-top: 3px solid $white;
            border-bottom: 3px solid $white;
            border-radius: 8px;
            background-color: $desking-row-color;
    
            &:hover, &.ag-row-hover, &.ag-row-highlight-below, &.ag-row-highlight-above {
                background-color: $row-hover-color;
            }
            &.ag-row-selected {
                background-color: rgba(33, 150, 243, 0.3);
            }
        }

    }

    .ag-header {
        border-top: solid $table-border-width;
        border-bottom: solid (2 * $table-border-width);
        border-color: $table-border-color;
        background-color: $white;

        .ag-header-cell {
            padding-left: 6px;
            padding-right: 6px;
        }
    }

    .ag-cell {
        padding-left: 5px;
        padding-right: 5px;
    }

    svg {
        color: $gray-600;
    }

    .color-positive {
        color: $positive
    }
}


/* -------------------------------------------------------------------
 * desking-grid
 * only 페이지편집
 * .ag-theme-moka-dnd-grid와 함께 사용
 * ------------------------------------------------------------------ */
$rel-row-color:  #ededed;
$rel-row-hover-color: darken($rel-row-color, 5);

.desking-grid {
    .ag-root-wrapper {
        .ag-row {
            &.next::before {
                content: "";
                z-index: 50;
                position: absolute;
                top: -3px;
                bottom: 48px;
                left: 0px;
                right: 0px;
                background: $positive;
            }
    
            &.hover::before {
                content: "";
                z-index: 50;
                position: absolute;
                top: 48px;
                bottom: -3px;
                left: 0px;
                right: 0px;
                background: $positive;
            }
    
            &.change::before {
                font-family: 'Font Awesome 5 Pro';
                content: '\f2f1';
                font-weight: 900;
                color: $positive;
                z-index: 50;
                position: absolute;
                top: 2px;
                left: 0px;
                right: 0px;
                font-size: 20px;
            }
        }
    
        .ag-rel-row {
            background-color: $rel-row-color;
    
            &:hover, &.ag-row-hover, &.ag-row-highlight-below, &.ag-row-highlight-above {
                background-color: $rel-row-hover-color;
            }
    
            &.next::before {
                bottom: 37px;
            }
    
            &.hover::before {
                top: 37px;
            }
        }
    }

    /* 주기사(기본) left 조정 */
    .ag-cell[col-id="relOrdEx"] {
        display: none !important;
    }
    .ag-cell[col-id="checkbox"] {
        left: 24px !important;
    }
    .ag-cell[col-id="relTitle"] {
        display: none !important;
    }
    .ag-cell[col-id="contentOrdEx"] {
        left: 48px !important;
    }
    .ag-cell[col-id="irThumbFileName"] {
        left: 72px !important;
    }
    .ag-cell[col-id="title"] {
        width: 225px !important;
        left: 122px !important;
    }

    /* 관련기사 left 조정 */
    .ag-rel-cell {
        height: 36px !important;
        line-height: 36px !important;

        &[col-id="relOrdEx"] {
            display: flex !important;
            width: 24px !important;
            left: 24px !important;
        }
        &[col-id="relTitle"] {
            display: flex !important;
            left: 48px !important;
            width: 299px !important;
        }
    }

    .ag-header {
        display: none;
    }

    .ag-cell,
    .ag-header-cell {
        padding-left: 3px !important;
        padding-right: 3px !important;
        display: flex;
        align-items: center;
    }

    .ag-edit-cell {
        padding-left: 0px;
        padding-right: 0px;
    }

    .ag-header-cell-text {
        white-space: pre;
        text-align: center;
    }

    &.ag-center-cols-clipper {
        min-height: 32px;
    }

    .ag-react-container > button {
        padding: 0;
    }

    .ag-header-group-cell-label,
    .ag-header-cell-label {
        justify-content: center;
    }

    .ag-center-cols-clipper {
        min-height: 32px;

        .ag-center-cols-viewport {
            overflow: hidden;
        }
    }

    /* 벌크 핫클릭 예외처리 */
    &.bulk-hot-click {
        .ag-root-wrapper {
            .ag-row {
                &.next::before {
                    top: 95px;
                }

                &.hover::before {
                    top: 95px;
                }
            }
        }
    }

    /* 네이버채널 예외처리 */
    &.naver-channel {
        /* 주기사(기본) left 조정 */
        .ag-cell[col-id="contentOrdEx"] {
            left: 24px !important;
        }
        .ag-cell[col-id="irThumbFileName"] {
            left: 48px !important;
        }
        .ag-cell[col-id="title"] {
            width: 255px !important;
            left: 98px !important;
        }
    }
}

/* -------------------------------------------------------------------
 * 페이지편집 셀 에디터
 * ------------------------------------------------------------------ */
.ag-grid-desking-editor {
    .title {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        white-space: normal;
        box-sizing: border-box;
        line-height: 20px;
        overflow: hidden;

        &.rel {
            -webkit-line-clamp: 1;
        }
    }

    .edit {
        position: fixed;
        top: 2px;
        left: 3px;
        width: 295px;

        textarea {
            height: 43px;
            @include custom-scroll;
        }
    }
}

/* -------------------------------------------------------------------
 * 그 외 ag-grid
 * ------------------------------------------------------------------ */
.ag-grid-align-center {
    .ag-header-group-cell-label,
    .ag-header-cell-label {
        justify-content: center;
    }
    .ag-row .ag-cell {
        display: flex;
        justify-content: center; /* align horizontal */
        align-items: center;
        .ag-react-container {
            align-items: center !important;
        }
    }

    .ag-row .ag-cell.ag-grid-cell-left {
        display: block;
    }
}

.ag-grid-comment {
    .actions-button-cell {
        overflow:visible;
    }

    .ag-row {
        z-index: 0;
    }

    .ag-row.ag-row-focus {
        z-index: 1;
    }

    .ag-body-viewport-wrapper {
        overflow: visible !important;
    }
}

/* -------------------------------------------------------------------
 * ag-grid icon
 * ------------------------------------------------------------------ */
.ag-icon {
    font-family: "agGridAlpine"; font-size: 16px; line-height: 16px; font-style: normal; font-weight: normal; font-variant: normal; text-transform: none; /* Better Font Rendering =========== */ -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;
    &.ag-icon-grip {
        transform: rotate(90deg);
        &:before {
            content: "\f114";
        }
    }
}